---
import Layout from '../../layouts/Base.astro'
import Container from '../../components/Container.astro';
import BlogPostPreview from '../../components/BlogPostPreview.astro';
import Paginator from '../../components/Paginator.astro'
import SimpleNav from '../../components/SimpleNav.astro';
  
  
export async function getStaticPaths({paginate}) {

  const posts = await Astro.glob('./*.md').then(posts =>
	posts
		.map(({ frontmatter, url }) => ({
      url: url,
			title: frontmatter.title,
			description: frontmatter.description,
			publishDate: frontmatter.publishDate,
			image: frontmatter.image,
		}))
		.sort((a, b) => new Date(b.publishDate).getTime() - new Date(a.publishDate).getTime())
);
return paginate(posts, {pageSize: 10});


}
// Component Script:
// You can write any JavaScript/TypeScript that you'd like here.
// It will run during the build, but never in the browser.
// All variables are available to use in the HTML template below.

const seo = {
  title: 'Blog',
  description: 'Simple list of posts by date and title.',
}

const { page } = Astro.props;
---


<Layout seo={seo} >
  <Container>
    <section class="blog">
      <SimpleNav />

      <h1>Blog</h1>
      <ul class="postlist">
        {page.data.map((post) => (
          <li>
            <BlogPostPreview post={post} />
          </li>
        ))}
      </ul>
    </section>
    <Paginator page={page}/>
  </Container>
</Layout>

<style>
  .blog {
    padding: 0;
  }

  .postlist {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .postlist li {
    padding: 0.75rem 0;
  }
</style>
